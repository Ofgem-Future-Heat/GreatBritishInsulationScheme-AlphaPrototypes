{% extends "layouts/internal-main2-4.html" %}

{% block pageTitle %}
    Add manual error
{% endblock %}

{% block content %}

<div class="govuk-grid-row">

  <div class="govuk-grid-column-two-thirds">
    <a href="#" class="govuk-back-link" onclick="history.go(-1)">Back</a>

    <fieldset class="govuk-fieldset">
        <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
          <h1 class="govuk-fieldset__heading">
            Add manual error
          </h1>
        </legend>

        <!-- Test reference number -->
        <!-- <dl class="govuk-summary-list govuk-summary-list--no-border">
          <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              Test reference number
            </dt>
            <dd class="govuk-summary-list__value">
              <p class="govuk-body">MGBIS<span id="autoGeneratedID">01000</span></p>
            </dd>
          </div>
        </dl> -->

        <!-- Field containing error in notification template -->
        <div class="govuk-form-group">
          <label class="govuk-label govuk-label--s" for="error-notification-field">
            Select the field containing error in notification template
          </label>
          <div id="location-hint" class="govuk-hint">
            Select a field in the drop down list.
          </div>
          <select class="govuk-select govuk-!-width-full" id="error-notification-field" name="error-notification-field" onchange="getErrorNotificationField()">
              <option value="" selected disabled hidden>Select an error notification field</option>
              <option value="Supplier Reference">Supplier Reference</option>
              <option value="Measure Reference Number">Measure Reference Number</option>
              <option value="Measure Type">Measure Type</option>
              <option value="Purpose of Notification">Purpose of Notification</option>
              <option value="Date of Completed Installation">Date of Completed Installation</option>
              <option value="Building Number">Building Number</option>
              <option value="Building Name">Building Name</option>
              <option value="Flat Name/Number">Flat Name/Number</option>
              <option value="Street Name">Street Name</option>
              <option value="Town">Town</option>
              <option value="Post Code">Post Code</option>
              <option value="Unique Property Reference Number (UPRN)">Unique Property Reference Number (UPRN)</option>
              <option value="Starting SAP Rating">Starting SAP Rating</option>
              <option value="Floor Area">Floor Area</option>
              <option value="Rural">Rural</option>
              <option value="Off Gas">Off Gas</option>
              <option value="Private Domestic Premises">Private Domestic Premises</option>
              <option value="Tenure Type">Tenure Type</option>
              <option value="Property">Property</option>
              <option value="Eligibility Type">Eligibility Type</option>
              <option value="Verification Method">Verification Method</option>
              <option value="DWP Reference Number">DWP Reference Number</option>
              <option value="Council Tax Band">Council Tax Band</option>
              <option value="PRS SAP Band Exception">PRS SAP Band Exception</option>
              <option value="Associated Insulation MRN for Heating Measures">Associated Insulation MRN for Heating Measures</option>
              <option value="Associated In-fill Measure 1">Associated In-fill Measure 1</option>
              <option value="Associated In-fill Measure 2">Associated In-fill Measure 2</option>
              <option value="Associated In-fill Measure 3">Associated In-fill Measure 3</option>
              <option value="Flex Referral Route">Flex Referral Route</option>
              <option value="LA Declaration Reference Number">LA Declaration Reference Number</option>
              <option value="Date Of Householder Eligibility">Date Of Householder Eligibility</option>
              <option value="Percentage Of Property Treated">Percentage Of Property Treated</option>
              <option value="Heating Source">Heating Source</option>
              <option value="Installer Name">Installer Name</option>
              <option value="Innovation Measure Number">Innovation Measure Number</option>
              <option value="Trustmark Business Licence Number">Trustmark Business Licence Number</option>
              <option value="Trustmark Unique Measure Reference">Trustmark Unique Measure Reference</option>
              <option value="Trustmark Lodged Certificate ID">Trustmark Lodged Certificate ID</option>
              <option value="Trustmark Project Reference Number">Trustmark Project Reference Number</option>
              <option value="TrustMark Completed Project Cert ID">TrustMark Completed Project Cert ID</option>
          </select>
        </div>

        <!-- Reason for error with measure -->
        <div class="govuk-form-group govuk-character-count" data-module="govuk-character-count" data-maxlength="250">
          <label class="govuk-label govuk-label--s" for="reason-for-error-with-measure">
            Reason for error with measure
          </label>
          <div id="reason-for-error-with-measure-hint" class="govuk-hint">
             Enter the reason for the error with the neasure.
          </div>
          <textarea class="govuk-textarea govuk-js-character-count" id="reason-for-error-with-measure" name="reason-for-error-with-measure" rows="5" aria-describedby="reason-for-error-with-measure-hint" onkeydown="getReasonForErrorWithMeasure()"></textarea>
          <div id="reason-for-error-with-measure-info" class="govuk-hint govuk-character-count__message">
            You can enter up to 250 characters
          </div>
        </div>


        <div class="govuk-button-group">
            <a class="govuk-button" data-module="govuk-button" href="check-new-manual-error-details">
                Add manual error
            </a>
            <a class="govuk-link" href="upload-manual-errors.html">Cancel</a>
        </div>

    </fieldset>

  </div>
  
  <script>
    
    // let testReferenceNumber = Math.floor(Math.random()*90000) + 10000;
    // console.log('testReferenceNumber', testReferenceNumber);

    // if (document.getElementById('autoGeneratedID')) {
    //   document.getElementById('autoGeneratedID').innerHTML = testReferenceNumber;
    //   localStorage.setItem("testReferenceNumber", testReferenceNumber);
    // }

    function getErrorNotificationField() {
      let errorNotificationField = document.getElementById("error-notification-field").value;
      localStorage.setItem('errorNotificationField', errorNotificationField);
    }

    function getReasonForErrorWithMeasure() {
      let reasonForErrorWithMeasure = document.getElementById("reason-for-error-with-measure").value;
      localStorage.setItem('reasonForErrorWithMeasure', reasonForErrorWithMeasure);
    }
  </script>

</div>

{% endblock %}
