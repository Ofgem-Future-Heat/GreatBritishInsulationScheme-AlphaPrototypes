(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{224:function(t,e,i){"use strict";i.r(e);var r=i(229),n=i(64),s=i(35),o={publication:{fields:[{id:"path",isTaxonomy:!1},{id:"title",isTaxonomy:!1},{id:"sticky",isTaxonomy:!1},{id:"field_teaser_summary",isTaxonomy:!1},{id:"thumbnail",isTaxonomy:!1,showOnPromotedOnly:!0},{id:"field_published",isTaxonomy:!1},{id:"field_closing_date",isTaxonomy:!1},{id:"field_closed_date",isTaxonomy:!1},{id:"field_investigation_status",isTaxonomy:!0,taxonomyId:"investigation_status"},{id:"field_status",isTaxonomy:!0,taxonomyId:"status"},{id:"field_provisional_order_status",isTaxonomy:!0,taxonomyId:"provisional_order_status"},{id:"field_call_for_input_status",isTaxonomy:!0,taxonomyId:"call_for_input_status"},{id:"field_final_order_status",isTaxonomy:!0,taxonomyId:"final_order_status"},{id:"field_proposal_status",isTaxonomy:!0,taxonomyId:"proposal_status"},{id:"field_industry_sector",isTaxonomy:!0,taxonomyId:"industry_sector"},{id:"field_case_type",isTaxonomy:!0,taxonomyId:"case_type"},{id:"field_publication_type",isTaxonomy:!0,taxonomyId:"publication_type"},{id:"field_licence_sector",isTaxonomy:!0,taxonomyId:"licence"},{id:"field_electricity_license_code",isTaxonomy:!0,taxonomyId:"electricity_license_code"},{id:"field_gas_license_code",isTaxonomy:!0,taxonomyId:"gas_license_code"},{id:"field_scheme_name",isTaxonomy:!0,taxonomyId:"scheme_name"}]},programme:{fields:[{id:"path",isTaxonomy:!1},{id:"title",isTaxonomy:!1},{id:"sticky",isTaxonomy:!1},{id:"field_teaser_summary",isTaxonomy:!1},{id:"thumbnail",isTaxonomy:!1,showOnPromotedOnly:!0},{id:"field_programme_status",isTaxonomy:!0,taxonomyId:"programme_status"},{id:"field_industry_sector",isTaxonomy:!0,taxonomyId:"industry_sector"}]},page:{fields:[{id:"path",isTaxonomy:!1},{id:"title",isTaxonomy:!1},{id:"sticky",isTaxonomy:!1},{id:"field_teaser_summary",isTaxonomy:!1},{id:"thumbnail",isTaxonomy:!1,showOnPromotedOnly:!0},{id:"field_programme_status",isTaxonomy:!0,taxonomyId:"programme_status"}]},company:{fields:[{id:"path",isTaxonomy:!1},{id:"title",isTaxonomy:!1},{id:"sticky",isTaxonomy:!1},{id:"field_teaser_summary",isTaxonomy:!1},{id:"field_company_number",isTaxonomy:!1},{id:"field_company_status",isTaxonomy:!0,taxonomyId:"company_status"},{id:"field_licensed",isTaxonomy:!1},{id:"field_licence_sector",isTaxonomy:!0,taxonomyId:"licence"}]},chart:{fields:[{id:"path",isTaxonomy:!1},{id:"title",isTaxonomy:!1},{id:"sticky",isTaxonomy:!1},{id:"thumbnail",isTaxonomy:!1},{id:"field_highcharts_id",isTaxonomy:!1},{id:"field_description",isTaxonomy:!1},{id:"additional_description",isTaxonomy:!1},{id:"drupal_internal__target_id",isTaxonomy:!1},{id:"drupal_internal__nid",isTaxonomy:!1}]}},a=[{title:"All",id:"all",contentTypes:["page","programme","company","chart","publication"]},{title:"Publications",id:"publications",contentTypes:["publication"]},{title:"Pages",id:"pages",contentTypes:["page","programme","company"]},{title:"Data Charts",id:"data-charts",contentTypes:["chart"]}],l={"node--publication":"Publication","node--chart":"Data Chart","node--page":"Page","node--programme":"Page","node--company":"Page"};function u(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return d(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function p(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vm=e}var e,i,r;return e=t,(i=[{key:"handlePromotedResultsData",value:function(t){this.vm.promotedResults=t,this.handleIncludedTaxonomyData(t)}},{key:"handleResultsData",value:function(t){this.vm.results=t,this.vm.setTotalResultsCount(),this.handleIncludedTaxonomyData(t),this.vm.isLoading=!1,this.vm.hasLoadedInitialData=!0}},{key:"handleIncludedTaxonomyData",value:function(t){var e=this;if(t.included){var i=t.included.filter((function(t){return t.type.includes("taxonomy_term--")})),r=this.vm.taxonomyData.map((function(t){return t.id}));i.forEach((function(t){!1===r.includes(t.id)&&e.vm.taxonomyData.push(t)}))}}},{key:"handleExtraTaxonomyData",value:function(t){var e=this;this.vm.contentTypes.forEach((function(i){e.vm.contentTypeData[i].fields.forEach((function(i){t[i.taxonomyId]&&t[i.taxonomyId].data.forEach((function(t){e.vm.taxonomyData.push(t)}))}))}))}},{key:"handleApiPayload",value:function(t){t.promoted&&this.handlePromotedResultsData(t.promoted),t.results&&(this.handleResultsData(t.results),this.vm.isPopState=!1),t.charts&&(this.handleResultsData(t.charts),this.vm.isPopState=!1),this.handleExtraTaxonomyData(t),t.results||t.charts||this.getResultsData([this.vm.resultsQuery()],this.vm.isPopState)}},{key:"fetchRequestBody",value:function(t){var e=this;return Promise.all(t.map((function(t){return window.fetch(t.url)}))).then((function(t){return Promise.all(t.map(e.handleApiResponse))}))}},{key:"handleApiResponse",value:function(t){return t.ok?t.json():Promise.reject(t)}},{key:"getResultsData",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.map((function(t){return t.id})),n=r.includes("results")||r.includes("charts");this.vm.shouldPushState=n&&this.vm.hasLoadedInitialData&&!i,this.vm.isLoading=!0,this.vm.pushState(),this.vm.hasLoadedInitialData&&this.vm.scrollToTop(),this.fetchRequestBody(t).then((function(i){var r={};i.forEach((function(e,i){Object.assign(r,c({},t[i].id,e))})),e.handleApiPayload(r)})).catch((function(t){console.warn(t)}))}},{key:"getCountsData",value:function(t){var e=this;this.fetchRequestBody(t).then((function(i){var r=i.map((function(e,i){return{id:t[i].id,title:t[i].title,count:e.meta.count}}));e.vm.searchResultsCounts=r}))}}])&&p(e.prototype,i),r&&p(e,r),t}();function h(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var m=function(){function t(e){var i,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vm=e,this.langcode=this.vm.$listingSettings.langcode,this.endpoints=(i=this.langcode,r="en"!==i?"/".concat(i):"",{publication:"".concat(r,"/jsonapi/index/publications"),taxonomy:"".concat(r,"/jsonapi/taxonomy_term")}),this.sortQueries={relevance:["&sort[relevance][path]=search_api_relevance","&sort[relevance][direction]=desc","&sort[published][path]=field_published","&sort[published][direction]=desc`]"].join(""),closingDate:["&sort[closing_date][path]=field_closing_date","&sort[closing_date][direction]=desc"].join(""),publishedDate:["&sort[published][path]=field_published","&sort[published][direction]=desc"].join(""),title:["&sort[title][path]=title","&sort[title][direction]=asc"].join(""),created:["&sort[created][path]=created","&sort[created][direction]=desc"].join(""),active:["&sort[active][path]=field_programme_status","&sort[active][direction]=asc","&sort[title][path]=title","&sort[title][direction]=asc"].join("")}}var e,i,r;return e=t,(i=[{key:"buildFilterQuery",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i="";Object.keys(t).forEach((function(e){var r=t[e];i+="&filter[".concat(e,"-filter][condition][path]=").concat(e),i+="&filter[".concat(e,"-filter][condition][operator]=IN"),r.forEach((function(t){i+="&filter[".concat(e,"-filter][condition][value][]=").concat(t.target_id)}))})),e?(this.vm.predefinedFilter=i,this.vm.filterQuery=i):this.vm.filterQuery="".concat(this.vm.predefinedFilter).concat(i)}},{key:"buildIncludeFieldQuery",value:function(){var t=this,e="";return Object.keys(this.vm.includedFields).length&&(e+="&filter[includes][group][conjunction]=OR",Object.keys(this.vm.includedFields).forEach((function(i){var r=t.vm.includedFields[i];e+="&filter[".concat(r,"-include][condition][path]=").concat(r),e+="&filter[".concat(r,"-include][condition][operator]=IS NOT NULL"),e+="&filter[".concat(r,"-include][condition][memberOf]=includes")}))),e}},{key:"buildPageCountsFilter",value:function(t){var e="content_types",i="";return i+="&filter[".concat(e,"-filter][condition][path]=").concat("type_prefilter"),i+="&filter[".concat(e,"-filter][condition][operator]=IN"),t.forEach((function(t){i+="&filter[".concat(e,"-filter][condition][value][]=").concat(t)})),i}},{key:"buildExcludeFieldQuery",value:function(){var t=this,e="";return Object.keys(this.vm.excludedFields).forEach((function(i){var r=t.vm.excludedFields[i];e+="&filter[".concat(r,"-exclude][condition][path]=").concat(r),e+="&filter[".concat(r,"-exclude][condition][operator]=IS NULL")})),e}},{key:"buildExcludedResultsQuery",value:function(){return this.vm.promotedResultIds.map((function(t){return["&filter[uuid-filter][condition][path]=uuid","&filter[uuid-filter][condition][operator]=NOT IN","&filter[uuid-filter][condition][value][]=".concat(t)].join("")})).join("")}},{key:"buildPageLimitQuery",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=null!==(t=e.isPromoted)&&void 0!==t&&t;return i?"page[limit]=".concat(this.vm.promotedResultsLimit):1===this.vm.currentPage?"page[limit]=".concat(this.vm.itemsPerPage-this.vm.promotedResultsCount):"page[limit]=".concat(this.vm.itemsPerPage)}},{key:"buildPagerOffsetQuery",value:function(){return 1===this.vm.currentPage?"":"&page[offset]=".concat(this.vm.pagerOffset-this.vm.promotedResultsCount)}},{key:"buildKeywordSearchQuery",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.vm.keywordSearch,e="";return t.length&&(e="&filter[fulltext]=".concat(t)),e}},{key:"buildNodeFieldsQuery",value:function(){var t,e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=null!==(t=i.isPromoted)&&void 0!==t&&t;return this.vm.contentTypes.map((function(t){var i=e.vm.contentTypeData[t].fields,n=(r?e.vm.contentTypeData[t].fields:i.filter((function(t){return!(null!=t&&t.showOnPromotedOnly)}))).map((function(t){return t.id})).join(",");return"&fields[node--".concat(t,"]=").concat(n)})).join("")}},{key:"buildPageCountsFieldsQuery",value:function(t){return t.map((function(t){return"&fields[node--".concat(t,"]=").concat("langcode")}))}},{key:"buildSortQuery",value:function(){return"relevance"===this.vm.sortBy?this.sortQueries.relevance:"closing_date"===this.vm.sortBy?this.sortQueries.closingDate:"title"===this.vm.sortBy?this.sortQueries.title:"active"===this.vm.sortBy?this.sortQueries.active:this.sortQueries.publishedDate}},{key:"buildPromotedSortQuery",value:function(){return this.sortQueries.publishedDate}},{key:"buildPromotedFilterQuery",value:function(){return this.vm.promotedQueryIds.map((function(t){return["&filter[uuid-filter][condition][path]=uuid","&filter[uuid-filter][condition][operator]=IN","&filter[uuid-filter][condition][value][]=".concat(t)].join("")})).join("")}},{key:"buildCombinedQuery",value:function(t,e){var i=e.filter((function(t){return!!t})).join(",");return"&".concat(t,"=").concat(i)}},{key:"buildIncludedTaxonomyQuery",value:function(){if(!this.vm.isMultipleContentTypes){var t=this.vm.contentTypes[0];return this.vm.contentTypeData[t].fields.filter((function(t){return t.isTaxonomy})).map((function(t){return t.id})).join(",")}}},{key:"buildExtraTaxonomy",value:function(){var t=this,e=[];return this.vm.contentTypes.forEach((function(i){t.vm.contentTypeData[i].fields.forEach((function(i){var r=void 0!==e.find((function(t){return t.id===i.taxonomyId}));if(i.isTaxonomy&&!r){var n={id:i.taxonomyId,url:"".concat(t.endpoints.taxonomy,"/").concat(i.taxonomyId,"?fields[taxonomy_term--").concat(i.taxonomyId,"]=name")};e.push(n)}}))})),e}},{key:"buildLangCodeQuery",value:function(){return"&filter[langcode]=en"}},{key:"buildSearchQuery",value:function(){var t=[this.buildPageLimitQuery(),this.buildPagerOffsetQuery(),this.buildKeywordSearchQuery(),this.vm.filterQuery,this.buildExcludedResultsQuery(),this.buildSortQuery(),this.buildNodeFieldsQuery(),this.buildCombinedQuery("include",[this.buildIncludedTaxonomyQuery()]),this.buildLangCodeQuery(),this.buildIncludeFieldQuery(),this.buildExcludeFieldQuery()].join("");return"".concat(this.endpoints.publication,"?").concat(t)}},{key:"buildPromotedQuery",value:function(){var t=[this.buildPageLimitQuery({isPromoted:!0}),this.buildPromotedFilterQuery(),this.buildKeywordSearchQuery(),this.vm.filterQuery,this.buildPromotedSortQuery(),this.buildNodeFieldsQuery({isPromoted:!0}),this.buildCombinedQuery("include",[this.buildIncludedTaxonomyQuery()]),this.buildLangCodeQuery(),this.buildIncludeFieldQuery(),this.buildExcludeFieldQuery()].join("");return"".concat(this.endpoints.publication,"?").concat(t)}},{key:"buildResultsCountQuery",value:function(t){var e=["page[limit]=1",this.buildKeywordSearchQuery(),this.buildPageCountsFilter(t),this.buildPageCountsFieldsQuery(t),this.buildLangCodeQuery()].join("");return"".concat(this.endpoints.publication,"?").concat(e)}}])&&h(e.prototype,i),r&&h(e,r),t}(),y={props:{selectedKeyword:{type:String,required:!0}},data:function(){return{translations:{keyword:Drupal.t("Keyword:"),apply:Drupal.t("Apply")},keywordSearch:this.selectedKeyword}},watch:{selectedKeyword:function(){this.keywordSearch=this.selectedKeyword}},methods:{onUpdateKeyword:function(){this.$emit("update-keyword",this.keywordSearch)}}},g=i(225),v=Object(g.a)(y,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.$listingSettings.keyword?i("div",{staticClass:"py-5 border-t border-color-grey-semi [ lg:py-10 ]"},[i("div",{staticClass:"container"},[i("form",{on:{submit:function(e){return e.preventDefault(),t.$emit("update-keyword",t.keywordSearch)}}},[i("div",{staticClass:"flex items-center relative p-1 border border-color-theme rounded-full [ lg:p-4 lg:pl-7 ]"},[i("label",{staticClass:"sr-only font-bold mb-0 [ lg:not-sr-only ]",attrs:{for:"filters-keyword-search"}},[t._v(t._s(t.translations.keyword))]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.keywordSearch,expression:"keywordSearch"}],staticClass:"bg-color-transparent text-color-white text-lg font-bold border-none appearance-none mr-5 py-0 [ lg:py-2 ]",attrs:{id:"filters-keyword-search",type:"search"},domProps:{value:t.keywordSearch},on:{input:function(e){e.target.composing||(t.keywordSearch=e.target.value)}}}),t._v(" "),i("button",{staticClass:"c-button c-button--icon c-button--light",attrs:{type:"submit"}},[i("span",{staticClass:"sr-only"},[t._v("\n            "+t._s(t.translations.apply)+"\n          ")]),t._v(" "),i("svg",{staticClass:"w-4 h-4 fill-current",attrs:{focusable:"false","aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#sprite-icon-search"}})])])])])])]):t._e()}),[],!1,null,null,null).exports,b=i(93),_={props:{option:{type:Object,required:!0},index:{type:Number,required:!0},arrowCounter:{type:Number,required:!0},filterText:{type:String,required:!0}},data:function(){return{}},computed:{},watch:{},methods:{updateSelectedFacets:function(t){this.$emit("update:selected-facets",t)},boldSubString:function(t,e){var i=new RegExp(e,"gi");return t.replace(i,(function(t){return t?"<strong>".concat(t,"</strong>"):""}))}}},w={components:{DropdownItemPopupResult:Object(g.a)(_,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"c-listbox__option",class:{"animate-hover-no-underline":t.option.values.active,"animate-hover-underline":!t.option.values.active,"c-listbox__option--active":t.index===t.arrowCounter},attrs:{id:"dropdown-"+t.option.values.value,role:"option",value:t.option.values.value,"aria-selected":t.option.values.active},on:{click:function(e){return t.updateSelectedFacets(t.option.values.value)}}},[i("span",{staticClass:"c-listbox__option-label"},[i("span",{staticClass:"animate-underline-target",domProps:{innerHTML:t._s(t.boldSubString(t.option.values.label,t.filterText))}})]),t._v(" "),i("svg",{staticClass:"c-button__chevron fill-current stroke-color-white transition duration-200",class:t.option.values.active?"rotate-0":"-rotate-45",attrs:{focusable:"false","aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#sprite-icon-cross-round"}})])])}),[],!1,null,null,null).exports},props:{id:{type:String,required:!0},labelPrefix:{type:String,default:function(){return""}},label:{type:String,required:!0},options:{type:Array,required:!0},selectedDropdown:{type:String,required:!0},containerElement:{type:String,default:function(){return"li"}},isWhiteButton:{type:Boolean,default:function(){return!1}}},data:function(){return{translations:{resultsFor:Drupal.t("Search results for"),beginTyping:Drupal.t("Begin typing to show results (minimum 3 characters)"),noMatchingOptions:Drupal.t("Sorry, no matching options")},listboxPosition:"",arrowCounter:-1,activeOption:"",textFilterFacets:["company_name"],filterText:""}},computed:{isSelected:function(){return this.selectedDropdown===this.id},hasSelection:function(){return void 0!==this.options.find((function(t){return t.values.active&&t.values.value}))},isDisabled:function(){return 0===this.options.length},filteredOptions:function(){var t=this;return this.options.filter((function(e){return-1!==e.values.label.toLowerCase().indexOf(t.filterText.toLowerCase())}))},showTextFilter:function(){return this.textFilterFacets.includes(this.id)&&this.options.length>=100},showResults:function(){return!this.showTextFilter||this.filterText.length>2}},watch:{isSelected:function(){var t=this;this.$nextTick((function(){t.setActiveFocus(),t.setListboxPosition()}))}},methods:{updateSelectedFacets:function(t){this.$emit("update:selected-facets",this.id,t),this.toggleDropdown(),this.filterText=""},toggleDropdown:function(){this.$emit("toggle:dropdown",this.id)},setListboxPosition:function(){var t=this.$refs["listbox-container"].getBoundingClientRect(),e=t.left>=0,i=t.right<=(window.innerWidth||document.documentElement.clientWidth);this.listboxPosition=e?i?"":"right":"left"},setActiveFocus:function(){var t=this,e=this.showTextFilter?this.$refs["text-filter"]:this.$refs.listbox;this.isSelected?this.$nextTick((function(){e.focus(),t.arrowCounter=0})):this.$refs.button.focus()},scrollIntoView:function(t){var e=this.$refs.listbox,i=e.children[this.arrowCounter],r=e.offsetHeight,n=e.scrollTop,s=n+r,o=i.offsetTop,a=o+i.offsetHeight;!1===(n<o&&s>a)&&("up"===t?0===this.arrowCounter?e.scrollTop=0:e.scrollTop=o:this.arrowCounter===this.filteredOptions.length-1?e.scrollTop=a:e.scrollTop=a-r)},onDownKeyPress:function(){this.showResults&&this.filteredOptions.length&&this.isSelected&&this.arrowCounter<this.filteredOptions.length-1&&(document.body.classList.add("tabbing"),this.arrowCounter=this.arrowCounter+1,this.scrollIntoView("down"),this.activeOption=this.filteredOptions[this.arrowCounter].values.value)},onUpKeyPress:function(){this.showResults&&this.filteredOptions.length&&this.isSelected&&this.arrowCounter>0&&(document.body.classList.add("tabbing"),this.arrowCounter=this.arrowCounter-1,this.scrollIntoView("up"),this.activeOption=this.filteredOptions[this.arrowCounter].values.value)},onHomeKeyPress:function(){this.showResults&&this.filteredOptions.length&&this.isSelected&&(document.body.classList.add("tabbing"),this.arrowCounter=0,this.scrollIntoView("up"),this.activeOption=this.filteredOptions[this.arrowCounter].values.value)},onEndKeyPress:function(){this.showResults&&this.filteredOptions.length&&this.isSelected&&(document.body.classList.add("tabbing"),this.arrowCounter=this.filteredOptions.length-1,this.scrollIntoView("down"),this.activeOption=this.filteredOptions[this.arrowCounter].values.value)},selectFacet:function(){if(this.arrowCounter>=0){var t=this.filteredOptions[this.arrowCounter];this.updateSelectedFacets(t.values.value)}}}},x=Object(g.a)(w,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(t.containerElement,{tag:"component",staticClass:"relative mx-0 border-0 [ lg:ml-7 lg:mt-5 ]",attrs:{"data-js-hook":"vue-dropdown"}},[i("button",{ref:"button",staticClass:"flex items-center font-medium h-full w-full px-0 py-1 text-color-inherit group relative no-underline leading-tight [ lg:p-0 ]",class:[t.isDisabled?"pointer-events-none opacity-50":"",t.isWhiteButton?"lg:bg-color-white lg:text-color-grey-dark lg:px-6 lg:py-3 lg:rounded-full":""],attrs:{type:"button","aria-haspopup":t.isDisabled?"":"listbox",disabled:t.isDisabled},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.toggleDropdown(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),t.toggleDropdown(e))}],click:t.toggleDropdown}},[t.labelPrefix?i("span",{staticClass:"font-bold flex-none"},[t._v(t._s(t.labelPrefix)+" ")]):t._e(),t._v(" "),i("span",{staticClass:"mr-2",attrs:{id:"filter-"+t.id}},[t._v(t._s(t.label))]),t._v(" "),i("svg",{staticClass:"c-button__chevron fill-color-grey-semi stroke-color-white transition-transform duration-200 ml-auto",class:[t.isSelected?"c-button__chevron--up fill-color-orange stroke-color-grey-dark [ lg:fill-color-orange ]":"c-button__chevron--down",t.isWhiteButton?"lg:fill-color-grey-dark":""],attrs:{focusable:"false","aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#sprite-icon-chevron-round"}})])]),t._v(" "),t.isDisabled?t._e():i("div",{directives:[{name:"show",rawName:"v-show",value:t.isSelected,expression:"isSelected"}],ref:"listbox-container",staticClass:"c-listbox",class:t.listboxPosition?"c-listbox--"+t.listboxPosition:""},[t.showTextFilter?[i("label",{staticClass:"sr-only",attrs:{for:"dropdown-filter-"+t.id}},[t._v("\n        "+t._s(t.translations.resultsFor)+" "+t._s(t.label)+"\n      ")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.filterText,expression:"filterText"}],ref:"text-filter",staticClass:"border mb-5",attrs:{id:"dropdown-filter-"+t.id,type:"search"},domProps:{value:t.filterText},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.onDownKeyPress(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),t.onUpKeyPress(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"home",void 0,e.key,void 0)?null:(e.preventDefault(),t.onHomeKeyPress(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"end",void 0,e.key,void 0)?null:(e.preventDefault(),t.onEndKeyPress(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.selectFacet(e))}],input:function(e){e.target.composing||(t.filterText=e.target.value)}}})]:t._e(),t._v(" "),i("ul",{ref:"listbox",staticClass:"c-listbox__list",attrs:{id:t.id,role:"listbox","aria-multiselectable":"true","aria-labelledby":"filter-"+t.id,"aria-activedescendant":"dropdown-"+t.activeOption,tabindex:"-1"},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.onDownKeyPress(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),t.onUpKeyPress(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"home",void 0,e.key,void 0)?null:(e.preventDefault(),t.onHomeKeyPress(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"end",void 0,e.key,void 0)?null:(e.preventDefault(),t.onEndKeyPress(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.selectFacet(e))}]}},[t.showResults?t._l(t.filteredOptions,(function(e,r){return i("DropdownItemPopupResult",{key:r,attrs:{option:e,index:r,"arrow-counter":t.arrowCounter,"filter-text":t.filterText},on:{"update:selected-facets":t.updateSelectedFacets}})})):t._e(),t._v(" "),t.showResults?t._e():i("li",[t._v("\n        "+t._s(t.translations.beginTyping)+"\n      ")]),t._v(" "),t.showResults&&0===t.filteredOptions.length?i("li",[t._v(t._s(t.translations.noMatchingOptions))]):t._e()],2)],2)])}),[],!1,null,null,null).exports,C={props:{id:{type:String,required:!0},label:{type:String,required:!0},options:{type:Array,required:!0},selectedDropdown:{type:String,required:!0}},data:function(){return{translations:{back:Drupal.t("Back")}}},computed:{isDisabled:function(){return 0===this.options.length}},methods:{updateSelectedFacets:function(t){this.$emit("update:selected-facets",this.id,t)}}};function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var k={components:{DropdownItemPopup:x,DropdownItemDrilldown:Object(g.a)(C,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isDisabled?t._e():i("li",{staticClass:"mx-4 border-b border-color-grey-semi last:border-b-0"},[i("button",{staticClass:"flex items-center justify-between font-medium h-full w-full py-5 text-color-inherit group relative no-underline leading-tight",attrs:{type:"button","data-js-menu-drilldown-button":"","aria-haspopup":"true"}},[i("span",{staticClass:"pointer-events-none",attrs:{id:"filter-"+t.id}},[t._v(t._s(t.label))]),t._v(" "),i("svg",{staticClass:"c-button__chevron c-button__chevron--down fill-color-grey-semi stroke-color-white hidden pointer-events-none [ lg:block ]",attrs:{focusable:"false","aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#sprite-icon-chevron-round"}})]),t._v(" "),i("svg",{staticClass:"w-3 h-3 fill-current ml-2 flex-none rotate-270 pointer-events-none",attrs:{focusable:"false","aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#sprite-icon-chevron-double"}})])]),t._v(" "),i("div",{staticClass:"absolute top-0 left-full w-full hidden bg-color-grey-dark text-left text-color-white z-10 will-change-transform",attrs:{"data-js-menu":"","data-js-menu-level-1":"","aria-hidden":"true"}},[i("div",{staticClass:"flex items-center mb-5 shadow-menu-bottom"},[i("button",{staticClass:"flex items-center p-4 pr-5",attrs:{"data-js-menu-item":"","data-js-menu-back":""}},[i("svg",{staticClass:"w-3 h-3 mr-2 fill-current ml-2 flex-none rotate-90 pointer-events-none",attrs:{focusable:"false","aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#sprite-icon-chevron-double"}})]),t._v(" "),i("span",{staticClass:"pointer-events-none"},[t._v(t._s(t.translations.back))])]),t._v(" "),i("span",{staticClass:"c-button c-button--text p-4 px-5 font-bold border-l border-color-grey-semi"},[i("span",{staticClass:"w-full"},[t._v(t._s(t.label))])])]),t._v(" "),i("ul",{attrs:{id:t.id,role:"listbox","aria-multiselectable":"true","data-js-menu-item":"","aria-labelledby":"filter-"+t.id}},t._l(t.options,(function(e,r){return i("li",{key:r,staticClass:"flex items-center flex-1 mx-4 border-b border-color-grey-semi last:border-b-0",attrs:{role:"option",value:e.values.value,"aria-selected":e.values.active,"data-js-menu-item-level-1":""}},[i("button",{staticClass:"flex items-center justify-between text-left font-medium h-full w-full py-5 text-color-inherit group relative leading-tight",class:{underline:e.values.active},attrs:{type:"button"},on:{click:function(i){return t.updateSelectedFacets(e.values.value)}}},[t._v("\n          "+t._s(e.values.label)+"\n\n          "),i("svg",{staticClass:"c-button__chevron fill-color-grey-semi stroke-color-white transition duration-200",class:e.values.active?"c-button__chevron--down":"c-button__chevron--down-right",attrs:{focusable:"false","aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#sprite-icon-cross-round"}})])])])})),0)])])}),[],!1,null,null,null).exports},props:{isBreakpointLg:{type:Boolean,required:!0},facets:{type:Array,required:!0},availableFilters:{type:Object,required:!0},mobileFiltersHidden:{type:Boolean,required:!0},selectedDropdown:{type:String,required:!0}},data:function(){return{translations:{filterPublications:Drupal.t("Filter publications"),close:Drupal.t("Close")},drilldown:""}},computed:{dropdownComponent:function(){return this.isBreakpointLg?"DropdownItemPopup":"DropdownItemDrilldown"},orderedAvailableFilters:function(){return Object.keys(this.availableFilters).sort((function(t,e){return t.weight-e.weight}))},facetsToShow:function(){var t=this;return this.orderedAvailableFilters.map((function(e){return t.facets.find((function(t){return t.id===e}))})).filter((function(t){return void 0!==t}))}},watch:{dropdownComponent:function(){this.toggleDrilldown()},mobileFiltersHidden:function(){!0===this.mobileFiltersHidden&&"object"===S(this.drilldown)&&this.drilldown.reset()}},mounted:function(){this.toggleDrilldown()},methods:{onUpdateSelectedFacets:function(t,e){this.$emit("update:filters",t,e)},onToggleDropdown:function(t){this.$emit("update:selected-dropdown",t)},toggleDrilldown:function(){var t=this;"DropdownItemDrilldown"===this.dropdownComponent?this.$nextTick((function(){t.drilldown=new b.a(t.$refs["drilldown-container"]),t.drilldown.init()})):"object"===S(this.drilldown)&&(this.drilldown.destroy(),this.drilldown="")}}},F={components:{DropdownContainer:Object(g.a)(k,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"drilldown-container",staticClass:"flex flex-col relative [ lg:flex-row ]",attrs:{"data-js-menu-container":"","data-js-menu":"","data-js-menu-level-0":""}},[i("div",{staticClass:"flex items-center mb-2 shadow-menu-bottom [ lg:hidden ]"},[i("p",{staticClass:"flex items-center m-0 p-4 pr-5 font-bold"},[t._v("\n      "+t._s(t.translations.filterPublications)+"\n    ")]),t._v(" "),i("button",{staticClass:"c-button c-button--text p-4 ml-auto animate-hover-no-underline",attrs:{type:"button"},on:{click:function(e){return t.$emit("toggle:filters")}}},[i("span",{staticClass:"animate-underline-target"},[t._v("\n        "+t._s(t.translations.close)+"\n      ")])])]),t._v(" "),i("ul",{staticClass:"mb-5 overflow-auto [ lg:flex lg:flex-wrap lg:-ml-7 lg:-mt-5 lg:overflow-visible lg:mb-0 ]"},[t._l(t.facetsToShow,(function(e,r){return[i(t.dropdownComponent,{key:r,ref:"dropdown-"+e.id,refInFor:!0,tag:"component",attrs:{id:e.id,label:t.availableFilters[e.id].label,options:e.terms,"selected-dropdown":t.selectedDropdown},on:{"update:selected-facets":t.onUpdateSelectedFacets,"toggle:dropdown":t.onToggleDropdown}})]}))],2)])}),[],!1,null,null,null).exports},props:{facets:{type:Array,required:!0},availableFilters:{type:Object,required:!0},mobileFiltersHidden:{type:Boolean,required:!0},sortOptions:{type:Array,required:!0},selectedDropdown:{type:String,required:!0},isBreakpointLg:{type:Boolean,required:!0}},data:function(){return{translations:{filter:Drupal.t("Filter")}}},methods:{onUpdateSelectedFacets:function(t,e){this.$emit("update:filters",t,e)},onUpdateSelectedDropdown:function(t){this.$emit("update:selected-dropdown",t)},onUpdateSort:function(t){this.$emit("update:sort",t)}}},P=Object(g.a)(F,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex flex-col overflow-auto [ lg:py-3 lg:flex-row lg:overflow-visible ]"},[i("h3",{staticClass:"text-base font-bold mr-5 mb-0 hidden [ lg:block ]"},[t._v(t._s(t.translations.filter)+":")]),t._v(" "),i("DropdownContainer",{attrs:{facets:t.facets,"available-filters":t.availableFilters,"mobile-filters-hidden":t.mobileFiltersHidden,"selected-dropdown":t.selectedDropdown,"is-breakpoint-lg":t.isBreakpointLg},on:{"update:filters":t.onUpdateSelectedFacets,"toggle:filters":function(e){return t.$emit("toggle:filters")},"update:selected-dropdown":t.onUpdateSelectedDropdown}})],1)}),[],!1,null,null,null).exports,T={components:{DropdownItemPopup:x},props:{sortOptions:{type:Array,required:!0},selectedDropdown:{type:String,required:!0}},data:function(){return{translations:{sortBy:Drupal.t("Sort by:")},id:"sort_by"}},computed:{label:function(){var t=this.sortOptions.find((function(t){return!0===t.values.active})),e="";return t?e=t.values.label:this.sortEnabled&&(console.warn('Unable to set label for "Keyword sort option": "'.concat(this.$listingSettings.keyword_sort,'" as it is not included on the main sort options. Falling back to raw value.')),e=this.$listingSettings.keyword_sort),e},sortEnabled:function(){return this.sortOptions.length>0}},methods:{onUpdateSort:function(t,e){this.$emit("update:sort",e)},onToggleDropdown:function(t){this.$emit("update:selected-dropdown",t)}}},D=Object(g.a)(T,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.sortEnabled?i("div",{staticClass:"flex-none relative [ lg:items-start lg:ml-auto ]"},[i("div",{staticClass:"flex items-center [ lg:ml-10 ]"},[i("div",{staticClass:"mb-0 w-full [ lg:flex lg:flex-wrap lg:w-auto lg:-ml-7 lg:-mt-5 ]"},[i("DropdownItemPopup",{ref:"dropdown-"+t.id,attrs:{id:t.id,"label-prefix":t.translations.sortBy,label:t.label,options:t.sortOptions,"selected-dropdown":t.selectedDropdown,"is-white-button":!0,"container-element":"div"},on:{"update:selected-facets":t.onUpdateSort,"toggle:dropdown":t.onToggleDropdown}})],1)])]):t._e()}),[],!1,null,null,null).exports,O={components:{SortBy:D},props:{sortOptions:{type:Array,required:!0},selectedDropdown:{type:String,required:!0},sortEnabled:{type:Boolean,required:!0}},data:function(){return{translations:{filter:Drupal.t("Filter")}}},methods:{onToggleMobileFilters:function(){this.$emit("toggle:mobile-filters")},onUpdateSort:function(t){this.$emit("update:sort",t)},onUpdateSelectedDropdown:function(t){this.$emit("update:selected-dropdown",t)}}},j=Object(g.a)(O,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container [ lg:hidden ]"},[i("div",{staticClass:"flex flex-wrap -ml-5 -mt-5 pb-7"},[i("div",{staticClass:"flex-auto min-w-1/2 pl-5 pt-5"},[i("button",{staticClass:"flex items-center justify-between w-full px-5 py-3 border border-color-grey-semi rounded-full",attrs:{type:"button"},on:{click:t.onToggleMobileFilters}},[t._v("\n        "+t._s(t.translations.filter)+"\n\n        "),i("svg",{staticClass:"w-5 h-3 fill-current flex-none ml-3",attrs:{focusable:"false","aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#sprite-icon-filter"}})])])]),t._v(" "),t.sortEnabled&&t.sortOptions.length?i("div",{staticClass:"flex-auto min-w-1/2 pl-5 pt-5"},[i("div",{staticClass:"px-5 py-3 border border-color-grey-semi rounded-full"},[i("SortBy",{staticClass:"[ lg:hidden ]",attrs:{"sort-options":t.sortOptions,"selected-dropdown":t.selectedDropdown},on:{"update:sort":t.onUpdateSort,"update:selected-dropdown":t.onUpdateSelectedDropdown}})],1)]):t._e()])])}),[],!1,null,null,null).exports;var I={props:{facets:{type:Array,required:!0},keyword:{type:String,required:!0},availableFilters:{type:Object,required:!0}},data:function(){return{translations:{selected:Drupal.t("Selected"),keyword:Drupal.t("Keyword:"),clearAll:Drupal.t("Clear all")}}},computed:{selectedFacets:function(){var t={};return this.facets.forEach((function(e){var i,r,n,s=e.terms.filter((function(t){return!0===t.values.active}));s.length&&(e in t?t[e.id].push(s):Object.assign(t,(i={},r=e.id,n=s,r in i?Object.defineProperty(i,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[r]=n,i)))})),t},hasSelectedFacets:function(){return Object.keys(this.selectedFacets).length>0},hasKeyword:function(){return this.keyword.length>0},itemsCount:function(){var t=0;return Object.values(this.selectedFacets).forEach((function(e){t+=e.length})),this.hasKeyword&&t++,t}},methods:{getCategoryLabel:function(t){return this.availableFilters[t].label},updateSelectedFacets:function(t,e){this.$emit("update:filters",t,e)},resetKeyword:function(){this.$emit("reset:keyword")}}},$=Object(g.a)(I,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.hasSelectedFacets||t.hasKeyword?i("div",{staticClass:"flex-none mt-auto py-4 bg-color-grey-dark text-color-white shadow-menu-top [ lg:py-7 lg:border-t lg:border-color-grey-semi lg:shadow-none ]"},[i("div",{staticClass:"flex mx-4 [ lg:container ]"},[i("p",{staticClass:"mb-0 font-bold [ lg:hidden ]"},[t._v(t._s(t.itemsCount)+" "+t._s(t.translations.selected))]),t._v(" "),i("ul",{staticClass:"hidden flex-wrap items-center mr-10 mb-0 -ml-7 [ lg:flex ]"},[t.hasKeyword?[i("li",{staticClass:"font-bold pl-7"},[t._v(t._s(t.translations.keyword))]),t._v(" "),i("li",{staticClass:"pl-3"},[i("button",{staticClass:"c-button c-button--text p-0",attrs:{type:"button"},on:{click:t.resetKeyword}},[i("span",{staticClass:"animate-underline-target"},[t._v(t._s(t.keyword))]),t._v(" "),i("svg",{staticClass:"c-button__chevron fill-color-grey-semi stroke-color-white ",attrs:{focusable:"false","aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#sprite-icon-cross-round"}})])])])]:t._e(),t._v(" "),t._l(t.selectedFacets,(function(e,r,n){return[i("li",{key:"category-"+n,staticClass:"font-bold pl-7"},[t._v(t._s(t.getCategoryLabel(r))+":")]),t._v(" "),t._l(e,(function(e,n){return i("li",{key:r+"-"+n,staticClass:"pl-3"},[i("button",{staticClass:"c-button c-button--text p-0",attrs:{type:"button"},on:{click:function(i){return t.updateSelectedFacets(r,e.values.value)}}},[t._v("\n            "+t._s(e.values.label)+"\n            "),i("svg",{staticClass:"c-button__chevron fill-color-grey-semi stroke-color-white ",attrs:{focusable:"false","aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#sprite-icon-cross-round"}})])])])}))]}))],2),t._v(" "),i("button",{staticClass:"animate-hover-no-underline p-0 ml-auto whitespace-no-wrap",attrs:{type:"button"},on:{click:function(e){return t.$emit("reset:filters")}}},[i("span",{staticClass:"animate-underline-target"},[t._v("\n        "+t._s(t.translations.clearAll)+"\n      ")])])])]):t._e()}),[],!1,null,null,null).exports,L={props:{hasFilters:{type:Boolean,required:!0},searchResultsCounts:{type:Array,required:!0},keywordSearch:{type:String,required:!0}},methods:{isActiveLink:function(t){return window.location.pathname===t},getCountByTitle:function(t){var e=this.searchResultsCounts.find((function(e){return e.title.toLowerCase().trim()===t.toLowerCase().trim()}));return null==e?void 0:e.count},buildUrlWithKeywordSearch:function(t){return this.keywordSearch.length?"".concat(t,"?keyword=").concat(this.keywordSearch):t}}},R=Object(g.a)(L,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex flex-col overflow-hidden mb-3 px-0 pt-4 border-t border-color-grey-semi [ lg:block lg:border-t lg:border-color-grey-semi lg:pt-7 lg:mb-0 lg:overflow-visible ]"},[i("div",{staticClass:"overflow-scroll-shadow | flex flex-col overflow-auto [ lg:container lg:flex-row lg:justify-between lg:overflow-visible lg:items-center ]"},[i("ul",{staticClass:"flex mb-0 gap-4 container w-full [ lg:mx-0 lg:px-0 ]"},t._l(t.$searchMenu,(function(e,r){return i("li",{key:""+e.url+r,staticClass:"mb-3 [ lg:mt-3 ]"},[i("a",{staticClass:"block relative px-4 py-2 text-color-inherit border rounded-full no-underline whitespace-no-wrap [ hover:border-color-orange ]",class:[t.isActiveLink(e.url)?"border-color-orange":"border-color-grey-mid"],attrs:{href:t.buildUrlWithKeywordSearch(e.url)}},[i("span",{staticClass:"relative z-10"},[i("span",{staticClass:"font-bold"},[t._v(t._s(e.title))]),t._v(" "),"number"==typeof t.getCountByTitle(e.title)?i("span",{staticClass:"text-color-grey-mid"},[t._v("\n              "+t._s(t.getCountByTitle(e.title))+"\n            ")]):t._e()]),t._v(" "),t.hasFilters&&t.isActiveLink(e.url)?i("div",{staticClass:"w-4 h-4 transform-search-page-active-arrow border border-top-0 border-left-0 border-color-inherit absolute top-full left-1/2 bg-color-grey-dark"}):t._e()])])})),0),t._v(" "),t._t("nav-after")],2)])}),[],!1,null,null,null).exports,q=i(12);function E(t){return function(t){if(Array.isArray(t))return B(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return B(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return B(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var A={components:{FiltersKeyword:v,FiltersFacets:P,FilterControlsMobile:j,SortBy:D,SelectedItems:$,SearchNavigation:R},props:{facets:{type:Array,required:!0},availableFilters:{type:Object,required:!0},state:{type:Object,required:!0},searchResultsCounts:{type:Array,required:!0},sortOptions:{type:Array,required:!0},sortEnabled:{type:Boolean,required:!0},isBreakpointLg:{type:Boolean,required:!0}},data:function(){return{mobileFiltersHidden:!0,selectedDropdown:""}},computed:{hasAvailableFilters:function(){return Object.keys(this.availableFilters).length>0}},created:function(){window.addEventListener("keyup",this.onEscPress),document.addEventListener("click",this.handleClickOutside)},destroyed:function(){window.removeEventListener("keyup",this.onEscPress),document.removeEventListener("click",this.handleClickOutside)},methods:{onUpdateSelectedFacets:function(t,e){this.$emit("update:filters",t,e),this.toggleMobileFilters()},onUpdateSort:function(t){this.$emit("update:sort",t)},onUpdateKeyword:function(t){this.$emit("update:keyword",t)},onResetKeyword:function(){this.$emit("reset:keyword")},onResetFilters:function(){this.$emit("reset:filters")},toggleMobileFilters:function(){this.mobileFiltersHidden=!this.mobileFiltersHidden},onEscPress:function(t){("Escape"===t.key||t.keyCode===q.a.escape)&&(this.mobileFiltersHidden=!0,this.selectedDropdown="")},onUpdateSelectedDropdown:function(t){this.selectedDropdown=this.selectedDropdown!==t?t:""},handleClickOutside:function(t){void 0===E(document.querySelectorAll("[data-js-hook=vue-dropdown]")).find((function(e){return e.contains(t.target)}))&&(this.selectedDropdown="")}}},Q=Object(g.a)(A,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pb-12 [ print:hidden ]"},[i("div",{staticClass:"bg-color-grey-dark text-color-white"},[1==t.$listingSettings.keyword?i("FiltersKeyword",{attrs:{"selected-keyword":t.state.keywordSearch},on:{"update-keyword":t.onUpdateKeyword}}):t._e(),t._v(" "),t.$searchMenu?i("SearchNavigation",{attrs:{"has-filters":t.hasAvailableFilters,"search-results-counts":t.searchResultsCounts,"keyword-search":t.state.keywordSearch},scopedSlots:t._u([{key:"nav-after",fn:function(){return[t.sortEnabled?i("SortBy",{staticClass:"hidden [ lg:flex ]",attrs:{"sort-options":t.sortOptions,"selected-dropdown":t.selectedDropdown},on:{"update:sort":t.onUpdateSort,"update:selected-dropdown":t.onUpdateSelectedDropdown}}):t._e()]},proxy:!0}],null,!1,2861676121)}):t._e(),t._v(" "),t.hasAvailableFilters||t.sortOptions.length?i("FilterControlsMobile",{attrs:{"sort-options":t.sortOptions,"selected-dropdown":t.selectedDropdown,"sort-enabled":t.sortEnabled},on:{"update:sort":t.onUpdateSort,"update:selected-dropdown":t.onUpdateSelectedDropdown,"toggle:mobile-filters":t.toggleMobileFilters}}):t._e(),t._v(" "),t.hasAvailableFilters||t.sortEnabled?i("div",{staticClass:"flex flex-col fixed z-20 top-0 left-0 w-full h-full bg-color-grey-dark [ lg:block lg:static lg:w-auto lg:h-auto ]",class:{hidden:t.mobileFiltersHidden},attrs:{"aria-hidden":t.isBreakpointLg?null:String(t.mobileFiltersHidden)}},[i("div",{staticClass:"flex flex-col overflow-hidden [ lg:block lg:py-3 lg:overflow-visible ]",class:{"[ lg:border-t lg:border-color-grey-semi ]":!t.$searchMenu}},[i("div",{staticClass:"flex flex-col overflow-hidden [ lg:container lg:flex-row lg:justify-between lg:overflow-visible ]"},[t.hasAvailableFilters?i("FiltersFacets",{attrs:{facets:t.facets,"available-filters":t.availableFilters,"sort-by":t.state.sortBy,"sort-options":t.sortOptions,"selected-dropdown":t.selectedDropdown,"mobile-filters-hidden":t.mobileFiltersHidden,"is-breakpoint-lg":t.isBreakpointLg},on:{"update:filters":t.onUpdateSelectedFacets,"update:sort":t.onUpdateSort,"toggle:filters":t.toggleMobileFilters,"update:selected-dropdown":t.onUpdateSelectedDropdown}}):t._e(),t._v(" "),t.sortEnabled&&!t.$searchMenu?i("SortBy",{staticClass:"hidden [ lg:flex ]",attrs:{"sort-options":t.sortOptions,"selected-dropdown":t.selectedDropdown},on:{"update:sort":t.onUpdateSort,"update:selected-dropdown":t.onUpdateSelectedDropdown}}):t._e()],1)]),t._v(" "),i("SelectedItems",{attrs:{facets:t.facets,keyword:t.state.keywordSearch,"available-filters":t.availableFilters},on:{"update:filters":t.onUpdateSelectedFacets,"reset:keyword":t.onResetKeyword,"reset:filters":t.onResetFilters}})],1):t._e()],1)])}),[],!1,null,null,null).exports,U={props:{results:{type:Array,required:!0}},computed:{showContentTypeLabel:function(){return this.$searchMenu&&"/search"===window.location.pathname}},methods:{getContentTypeLabel:function(t){return l[t]?l[t]:""}}},K=Object(g.a)(U,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("ol",{staticClass:"mb-0 -mt-px pt-px border-l border-color-theme md:flex md:flex-wrap"},[t._l(t.results,(function(e,i){return[t._t("teaser-component",null,{result:e,index:i,showContentTypeLabel:t.showContentTypeLabel,contentTypeLabel:t.getContentTypeLabel(e.type)})]}))],2)}),[],!1,null,null,null).exports,M={props:{images:{type:Array,required:!0},altText:{type:String,default:function(){return""}}},computed:{imagePaths:function(){return this.images.map((function(t){return Object.values(t)[0]}))},imageSrcset:function(){var t=this,e=[],i={tiny:"400w",small:"750w",medium:"1000w",large:"1300w",huge:"1500w"};return Object.keys(i).forEach((function(r){var n=t.imagePaths.find((function(t){return t.includes(r)}));n&&e.push("".concat(n," ").concat(i[r]))})),e.join(", ")},imageSrc:function(){return this.imagePaths[0]}},watch:{imageSrcset:function(){this.$refs.lazyLoadImage.classList.add("lazyload")}}},N=Object(g.a)(M,(function(){var t=this.$createElement;return(this._self._c||t)("img",{ref:"lazyLoadImage",staticClass:"lazyload | block absolute t-0 l-0 w-full h-full object-cover",attrs:{"data-srcset":this.imageSrcset,"data-src":this.imageSrc,"data-sizes":"auto",alt:this.altText}})}),[],!1,null,null,null).exports,H={components:{LazyLoadImage:N},props:{teaserData:{type:Object,required:!0},taxonomyData:{type:Array,default:function(){return[]}},included:{type:Array,default:function(){return[]}},promotedResultIds:{type:Array,required:!0},showContentTypeLabel:{type:Boolean,default:function(){return!1}},contentTypeLabel:{type:String,default:function(){return""}}},data:function(){return{translations:{featured:Drupal.t("Featured"),published:Drupal.t("Published"),closed:Drupal.t("Closed"),closing:Drupal.t("Closing"),publicationType:Drupal.t("Publication type"),industrySector:Drupal.t("Industry sector"),licenceType:Drupal.t("Licence type"),electricityCode:Drupal.t("Electricity code"),gasCode:Drupal.t("Gas code"),schemeName:Drupal.t("Scheme name"),companyNumber:Drupal.t("Company number"),companyStatus:Drupal.t("Status")}}},computed:{teaserUrl:function(){var t=this.$listingSettings.langcode,e="en"!==t?"/".concat(t):"";return"".concat(e).concat(this.teaserData.attributes.path.alias)},teaserImage:function(){return this.teaserData.attributes.thumbnail},formattedPublicationTypes:function(){return this.getTaxonomyFromField("field_case_type").concat(this.getTaxonomyFromField("field_publication_type"))},formattedStatus:function(){return"\n        ".concat(this.getTaxonomyFromField("field_status").join(""),"\n        ").concat(this.getTaxonomyFromField("field_investigation_status").join(""),"\n        ").concat(this.getTaxonomyFromField("field_call_for_input_status").join(""),"\n        ").concat(this.getTaxonomyFromField("field_proposal_status").join(""),"\n        ").concat(this.getTaxonomyFromField("field_provisional_order_status").join(""),"\n        ").concat(this.getTaxonomyFromField("field_final_order_status").join(""),"\n        ").concat(this.getTaxonomyFromField("field_programme_status").join(""),"\n      ").trim()},showSummaryText:function(){return this.teaserData.attributes.field_teaser_summary&&!this.teaserImage},isPromoted:function(){return this.promotedResultIds.includes(this.teaserData.id)},statusIsInactive:function(){var t=this;return[Drupal.t("Inactive")].filter((function(e){return t.formattedStatus.includes(e)})).length>0}},methods:{formatDate:function(t){return new Date(t).toLocaleString("en-GB",{year:"numeric",month:"long",day:"numeric"})},formatMeta:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=t.length>e,r=i?"&hellip;":"";return i&&(t.length=e),"".concat(t.join("<br>")," ").concat(r)},getTaxonomyFromField:function(t){var e=this,i=this.teaserData.relationships[t],r=[];if(i){var n=i.data;if(n)if(Array.isArray(n))n.forEach((function(t){var i=e.taxonomyData.find((function(e){return t.id===e.id}));i&&r.push(i.attributes.name)}));else{var s=this.taxonomyData.find((function(t){return n.id===t.id}));s&&r.push(s.attributes.name)}}return r}}},z=Object(g.a)(H,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"-mt-px"},[i("div",{staticClass:"c-teaser h-full border-color-theme mt-0 [ md:min-h-teaser ]",class:{"c-teaser--listing-promoted":t.isPromoted}},[i("a",{staticClass:"c-teaser__wrapper c-teaser__link group animate-hover-underline animate-hover-underline--medium",attrs:{href:t.teaserUrl,rel:"bookmark"}},[t.isPromoted&&t.teaserImage.length?i("div",{staticClass:"c-teaser__img"},[i("div",{staticClass:"media-image"},[i("LazyLoadImage",{attrs:{images:t.teaserImage}})],1)]):t._e(),t._v(" "),i("div",{staticClass:"c-teaser__inner"},[t.showContentTypeLabel?i("p",{staticClass:"text-sm text-color-orange-dark font-bold mb-2"},[t._v("\n          "+t._s(t.contentTypeLabel)+"\n        ")]):t._e(),t._v(" "),t.isPromoted?i("p",{staticClass:"flex items-center mb-2 text-xs font-bold"},[i("svg",{staticClass:"w-3 h-3 mr-1",attrs:{focusable:"false","aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#sprite-icon-star"}})]),t._v(" "),i("span",[t._v("\n            "+t._s(t.translations.featured)+"\n          ")])]):t._e(),t._v(" "),i("h3",{staticClass:"c-teaser__title"},[i("span",{staticClass:"animate-underline-target"},[t._v(t._s(t.teaserData.attributes.title))])]),t._v(" "),i("div",{staticClass:"c-teaser__content"},[t.showSummaryText?i("div",{staticClass:"c-wysiwyg c-teaser__summary text-sm"},[i("div",{domProps:{innerHTML:t._s(t.teaserData.attributes.field_teaser_summary.value)}})]):t._e(),t._v(" "),i("div",{staticClass:"mt-auto text-xs"},[i("div",{staticClass:"pt-14"},[i("div",{staticClass:"flex flex-wrap font-bold mb-1"},[t.teaserData.attributes.field_published?i("div",[t._v("\n                  "+t._s(t.translations.published)+":\n\n                  "),i("time",{attrs:{datetime:t.teaserData.attributes.field_published}},[t._v("\n                    "+t._s(t.formatDate(t.teaserData.attributes.field_published))+"\n                  ")])]):t._e(),t._v(" "),t.teaserData.attributes.field_closed_date?i("div",[t._v("\n                   — \n                  "+t._s(t.translations.closed)+":\n\n                  "),i("time",{attrs:{datetime:t.teaserData.attributes.field_closed_date}},[t._v("\n                    "+t._s(t.formatDate(t.teaserData.attributes.field_closed_date))+"\n                  ")])]):t._e(),t._v(" "),t.teaserData.attributes.field_closing_date&&!t.teaserData.attributes.field_closed_date?i("div",[t._v("\n                   — \n                  "+t._s(t.translations.closing)+":\n\n                  "),i("time",{attrs:{datetime:t.teaserData.attributes.field_closing_date}},[t._v("\n                    "+t._s(t.formatDate(t.teaserData.attributes.field_closing_date))+"\n                  ")])]):t._e()])]),t._v(" "),i("div",{staticClass:"md:flex md:items-end"},[t.formattedPublicationTypes||t.getTaxonomyFromField("field_industry_sector").length?i("div",{staticClass:"text-color-grey-semi [ md:mr-5 ]"},[t.formattedPublicationTypes?[i("div",{staticClass:"sr-only"},[t._v(t._s(t.translations.publicationType))]),t._v(" "),i("div",{domProps:{innerHTML:t._s(t.formatMeta(t.formattedPublicationTypes))}})]:t._e(),t._v(" "),t.teaserData.attributes.field_company_number?[i("div",{staticClass:"sr-only"},[t._v(t._s(t.translations.companyNumber))]),t._v(" "),i("div",{domProps:{innerHTML:t._s(t.teaserData.attributes.field_company_number)}})]:t._e(),t._v(" "),t.getTaxonomyFromField("field_company_status").length?[i("div",{staticClass:"sr-only"},[t._v(t._s(t.translations.companyStatus))]),t._v(" "),i("div",{domProps:{innerHTML:t._s(t.formatMeta(t.getTaxonomyFromField("field_company_status")))}})]:t._e(),t._v(" "),t.getTaxonomyFromField("field_industry_sector").length?[i("div",{staticClass:"sr-only"},[t._v(t._s(t.translations.industrySector))]),t._v(" "),i("div",{domProps:{innerHTML:t._s(t.formatMeta(t.getTaxonomyFromField("field_industry_sector")))}})]:t._e(),t._v(" "),t.getTaxonomyFromField("field_licence_sector").length?[i("div",{staticClass:"sr-only"},[t._v(t._s(t.translations.licenceType))]),t._v(" "),i("div",{domProps:{innerHTML:t._s(t.formatMeta(t.getTaxonomyFromField("field_licence_sector")))}})]:t._e(),t._v(" "),t.getTaxonomyFromField("field_electricity_license_code").length?[i("div",{staticClass:"sr-only"},[t._v(t._s(t.translations.electricityCode))]),t._v(" "),i("div",{domProps:{innerHTML:t._s(t.formatMeta(t.getTaxonomyFromField("field_electricity_license_code")))}})]:t._e(),t._v(" "),t.getTaxonomyFromField("field_gas_license_code").length?[i("div",{staticClass:"sr-only"},[t._v(t._s(t.translations.gasCode))]),t._v(" "),i("div",{domProps:{innerHTML:t._s(t.formatMeta(t.getTaxonomyFromField("field_gas_license_code")))}})]:t._e(),t._v(" "),t.getTaxonomyFromField("field_scheme_name").length?[i("div",{staticClass:"sr-only"},[t._v(t._s(t.translations.schemeName))]),t._v(" "),i("div",{domProps:{innerHTML:t._s(t.formatMeta(t.getTaxonomyFromField("field_scheme_name")))}})]:t._e()],2):t._e(),t._v(" "),t.formattedStatus.length?i("div",{staticClass:"inline-block mt-3 px-4 py-1 rounded-full text-xs font-bold flex-none [ md:ml-auto md:mt-0 ]",class:t.statusIsInactive?"bg-color-grey-light":"bg-color-yellow"},[t._v("\n                "+t._s(t.formattedStatus)+"\n              ")]):t._e()])])])])])])])}),[],!1,null,null,null).exports;function W(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function V(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?W(Object(i),!0).forEach((function(e){J(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):W(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function J(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var G={components:{LazyLoadImage:N},props:{teaserData:{type:Object,required:!0},included:{type:Array,default:function(){return[]}},showContentTypeLabel:{type:Boolean,default:function(){return!1}},contentTypeLabel:{type:String,default:function(){return""}}},computed:{hasImage:function(){return this.teaserData.attributes.thumbnail.length},additionalDescription:function(){return this.teaserData.attributes.additional_description.map((function(t){return V(V({},t),{},{type:"additional_description"})}))},modalData:function(){return Object.assign({},{data:this.teaserData},{included:this.additionalDescription})}},methods:{getRelationshipDataFromField:function(t,e){var i=this,r=this.teaserData.relationships[t],n=[];if(r){var s=r.data;if(s)if(Array.isArray(s))s.forEach((function(t){var r=i.included.find((function(e){return t.id===e.id}));r&&(e?n.push(r.attributes[e]):n.push(r))}));else{var o=this.included.find((function(t){return s.id===t.id}));o&&(e?n.push(o.attributes[e]):n.push(o))}}return n}}},Y=Object(g.a)(G,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"-mt-px"},[i("div",{staticClass:"c-teaser h-full border-color-theme mt-0"},[i("button",{staticClass:"c-teaser__wrapper c-teaser__link group text-left w-full h-full animate-hover-underline animate-hover-underline--medium",attrs:{type:"button","data-js-chart-modal-button":"","data-js-chart-modal-data":JSON.stringify(t.modalData)}},[t.showContentTypeLabel?i("p",{staticClass:"text-sm text-color-orange-dark font-bold mb-2"},[t._v("\n        "+t._s(t.contentTypeLabel)+"\n      ")]):t._e(),t._v(" "),i("div",{staticClass:"c-teaser__inner"},[i("h3",{staticClass:"c-teaser__title"},[i("span",{staticClass:"animate-underline-target"},[t._v("\n            "+t._s(t.teaserData.attributes.title)+"\n          ")])])]),t._v(" "),t.hasImage?i("div",{staticClass:"c-teaser__img | w-full aspect-ratio-15/10 relative block"},[i("LazyLoadImage",{attrs:{images:t.teaserData.attributes.thumbnail}})],1):t._e()])])])}),[],!1,null,null,null).exports,X={props:{resultsCount:{type:Number,default:function(){return 0}},currentPage:{type:Number,required:!0},paginationSize:{type:Number,required:!0}},data:function(){return{itemsPerPage:this.paginationSize,offset:5,firstPage:1,filter:""}},computed:{maxPageIndex:function(){return Math.ceil(this.resultsCount/this.itemsPerPage)},paginationItems:function(){var t=[],e=this.currentPage-Math.floor(this.offset/2);e<1&&(e=this.firstPage);var i=e+this.offset-1;for(i>this.maxPageIndex&&(i=this.maxPageIndex);e<=i;)t.push(e),e++;return t},prevPage:function(){return this.currentPage-1},nextPage:function(){return this.currentPage+1},disablePrev:function(){return this.currentPage<=this.firstPage},disableNext:function(){return this.currentPage>=this.maxPageIndex}},methods:{changePage:function(t){this.$emit("update:pagination",t)}}},Z={components:{TeaserContainer:K,TeaserStandard:z,TeaserChart:Y,Pager:Object(g.a)(X,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.paginationItems.length>1?i("div",{staticClass:"c-pager [ print:hidden ]"},[i("div",{staticClass:"border -mt-px border-color-theme"},[i("ul",{staticClass:"flex justify-between mb-0"},[i("li",[i("button",{staticClass:"group hidden items-center justify-center w-20 h-20 border-r border-color-theme [ md:flex ]",class:{"text-color-grey-mid pointer-events-none":t.disablePrev},attrs:{type:"button",disabled:t.disablePrev,"aria-disabled":t.disablePrev,title:"Page 1"},on:{click:function(e){return t.changePage(t.firstPage)}}},[i("span",{staticClass:"sr-only"},[t._v("First")]),t._v(" "),i("svg",{staticClass:"w-3 h-3 fill-current flex-none transition duration-200 ease-in-out rotate-90 [ group-hover:transform-rotate-90-scale-125 group-focus:transform-rotate-90-scale-125 ]",attrs:{focusable:"false","aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#sprite-icon-chevron-double"}})])])]),t._v(" "),i("li",{staticClass:"mr-auto"},[i("button",{staticClass:"group flex items-center justify-center w-20 h-20 border-r border-color-theme",class:{"text-color-grey-mid pointer-events-none":t.disablePrev},attrs:{type:"button",disabled:t.disablePrev,"aria-disabled":t.disablePrev},on:{click:function(e){return t.changePage(t.prevPage)}}},[i("span",{staticClass:"sr-only"},[t._v("Previous")]),t._v(" "),i("svg",{staticClass:"w-3 h-3 fill-current flex-none transition duration-200 ease-in-out rotate-90 [ group-hover:transform-rotate-90-scale-125 group-focus:transform-rotate-90-scale-125 ]",attrs:{focusable:"false","aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#sprite-icon-chevron"}})])])]),t._v(" "),t._l(t.paginationItems,(function(e,r){return i("li",{key:r,attrs:{"aria-current":e===t.currentPage?"page":null}},[i("button",{staticClass:"c-pager__button h-20 py-0",class:{"is-active font-bold":e===t.currentPage},attrs:{type:"button"},on:{click:function(i){return t.changePage(e)}}},[i("span",{staticClass:"visually-hidden"},[t._v("Page")]),t._v(" "+t._s(e)+"\n        ")])])})),t._v(" "),i("li",{staticClass:"ml-auto right-arrow"},[i("button",{staticClass:"group flex items-center justify-center w-20 h-20 border-l border-color-theme",class:{"text-color-grey-mid pointer-events-none":t.disableNext},attrs:{type:"button",disabled:t.disableNext,"aria-disabled":t.disableNext},on:{click:function(e){return t.changePage(t.nextPage)}}},[i("span",{staticClass:"sr-only"},[t._v("Next")]),t._v(" "),i("svg",{staticClass:"w-3 h-3 fill-current flex-none transition duration-200 ease-in-out rotate-270 [ group-hover:transform-rotate-270-scale-125 group-focus:transform-rotate-270-scale-125 ]",attrs:{focusable:"false","aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#sprite-icon-chevron"}})])])]),t._v(" "),i("li",{staticClass:"right-arrow"},[i("button",{staticClass:"group hidden items-center justify-center w-20 h-20 border-l border-color-theme [ md:flex ]",class:{"text-color-grey-mid pointer-events-none":t.disableNext},attrs:{type:"button",disabled:t.disableNext,"aria-disabled":t.disableNext,title:"Page "+t.maxPageIndex},on:{click:function(e){return t.changePage(t.maxPageIndex)}}},[i("span",{staticClass:"sr-only"},[t._v("Last (Page "+t._s(t.maxPageIndex)+")")]),t._v(" "),i("svg",{staticClass:"w-3 h-3 fill-current flex-none transition duration-200 ease-in-out rotate-270 [ group-hover:transform-rotate-270-scale-125 group-focus:transform-rotate-270-scale-125 ]",attrs:{focusable:"false","aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#sprite-icon-chevron-double"}})])])])],2)])]):t._e()}),[],!1,null,null,null).exports,LoadingOverlayIcon:Object(g.a)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"absolute top-0 left-0 w-full z-20 flex justify-center"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",display:"block"}},[e("circle",{attrs:{cx:"50",cy:"50",r:"30",stroke:"#e76d1c","stroke-width":"30",fill:"none"}}),e("circle",{attrs:{cx:"50",cy:"50",r:"30",stroke:"#fbb515","stroke-width":"30","stroke-linecap":"round",fill:"none"}},[e("animateTransform",{attrs:{attributeName:"transform",type:"rotate",repeatCount:"indefinite",dur:"1.1764705882352942s",values:"0 50 50;180 50 50;720 50 50",keyTimes:"0;0.5;1"}}),e("animate",{attrs:{attributeName:"stroke-dasharray",repeatCount:"indefinite",dur:"1.1764705882352942s",values:"37.69911184307752 150.79644737231007;0 188.49555921538757;37.69911184307752 150.79644737231007",keyTimes:"0;0.5;1"}})],1)])])}),[],!1,null,null,null).exports},props:{hasLoadedInitialData:{type:Boolean,required:!0},hasData:{type:Boolean,required:!0},listingType:{type:String,required:!0},results:{type:Array,default:function(){return[]}},included:{type:Array,default:function(){return[]}},taxonomyData:{type:Array,default:function(){return[]}},itemsPerPage:{type:Number,required:!0},resultsCount:{type:Number,required:!0},pagerOffset:{type:Number,required:!0},state:{type:Object,required:!0},isLoading:{type:Boolean,required:!0},promotedResultsLimit:{type:Number,required:!0},promotedResultIds:{type:Array,required:!0},isMultipleContentTypes:{type:Boolean,required:!0}},data:function(){return{translations:{displaying:Drupal.t("Displaying"),of:Drupal.t("of"),noResults:Drupal.t("Your search query didn't return any results"),resetSearch:Drupal.t("Reset search")},columns:this.$listingSettings.columns||4}},computed:{resultFrom:function(){return this.pagerOffset+1},resultTo:function(){var t=this.resultFrom+(this.itemsPerPage-1);return t<this.resultsCount?t:this.resultsCount}},methods:{onPaginationChange:function(t){this.$emit("update:pagination",t)},resetFilters:function(){this.$emit("reset:filters")}}};function tt(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return et(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return et(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw s}}}}function et(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var it={data:function(){return{availableFacetNames:Object.keys(this.$listingSettings.facets)}},methods:{parseQueryString:function(){var t,e=window.location.search,i=new URLSearchParams(e),r={},n=tt(i.keys());try{for(n.s();!(t=n.n()).done;){var s=t.value;["keyword","page","sort"].includes(s)?r[s]=i.get(s):r[s]=i.getAll(s).map((function(t){return{target_id:t}}))}}catch(t){n.e(t)}finally{n.f()}return r},getSelectedFacets:function(t){var e=this,i={};return Object.keys(t).forEach((function(r){var n,s,o;e.availableFacetNames.includes(r)&&Object.assign(i,(n={},s=r,o=t[r],s in n?Object.defineProperty(n,s,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[s]=o,n))})),i},getKeyword:function(t){return t.keyword||""},getPage:function(t){return Number(t.page)||1},getSortBy:function(t){return t.sort||""}}};function rt(t){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nt(t){return function(t){if(Array.isArray(t))return st(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return st(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return st(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var ot={components:{Filters:Q,Results:Object(g.a)(Z,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"relative"},[i("div",{staticClass:"container lg:mt-12"},[t.isLoading?i("LoadingOverlayIcon"):t._e(),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:t.resultsCount>0,expression:"resultsCount > 0"}],staticClass:"font-bold",attrs:{"aria-live":"polite"}},[t._v(t._s(t.translations.displaying)+" "+t._s(t.resultFrom)+" - "+t._s(t.resultTo)+" "+t._s(t.translations.of)+" "+t._s(t.resultsCount))]),t._v(" "),i("Pager",{attrs:{"results-count":t.resultsCount,"current-page":t.state.currentPage,"pagination-size":Number(t.itemsPerPage)},on:{"update:pagination":t.onPaginationChange}}),t._v(" "),t.hasData&&t.results.length?i("TeaserContainer",{attrs:{results:t.results},scopedSlots:t._u([{key:"teaser-component",fn:function(e){var r=e.result,n=e.index,s=e.showContentTypeLabel,o=e.contentTypeLabel;return["node--chart"!==r.type?i("TeaserStandard",{key:n,staticClass:"w-full",class:t.promotedResultIds.includes(r.id)&&n<t.promotedResultsLimit?"[ md:w-1/2 ]":"[ md:w-1/2 ][ lg:w-1/"+t.columns+" ]",attrs:{"teaser-data":r,"taxonomy-data":t.taxonomyData,"promoted-result-ids":t.promotedResultIds,included:t.included,"show-content-type-label":s,"content-type-label":o}}):i("TeaserChart",{key:n,staticClass:"w-full",class:"[ md:w-1/2 ][ lg:w-1/"+t.columns+" ]",attrs:{"teaser-data":r,included:t.included,"show-content-type-label":s,"content-type-label":o}})]}}],null,!1,4007128747)}):t.hasLoadedInitialData?i("div",[i("p",[t._v(t._s(t.translations.noResults))]),t._v(" "),i("button",{staticClass:"c-button c-button--cta",attrs:{type:"button"},on:{click:t.resetFilters}},[i("span",[t._v(t._s(t.translations.resetSearch))]),t._v(" "),i("svg",{class:["c-button__chevron fill-color-grey-semi stroke-color-white","group-hover:fill-color-grey-dark group-focus:fill-color-grey-dark","group-hover:stroke-color-white group-focus:stroke-color-white"],attrs:{focusable:"false","aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#sprite-icon-chevron-round"}})])])]):t._e(),t._v(" "),i("Pager",{attrs:{"results-count":t.resultsCount,"current-page":t.state.currentPage,"pagination-size":Number(t.itemsPerPage)},on:{"update:pagination":t.onPaginationChange}})],1)])}),[],!1,null,null,null).exports},mixins:[it],props:{initialKeyword:{type:String,required:!0},initialSelectedFacets:{type:Object,required:!0},initialPage:{type:Number,required:!0},initialSortBy:{type:String,required:!0},filtersEnabled:{type:Boolean,required:!0},listingType:{type:String,required:!0}},data:function(){return{availableFilters:Object.assign({},this.$listingSettings.facets),selectedFacets:Object.assign({},this.initialSelectedFacets),includedFields:Object.assign({},this.$listingSettings.include),excludedFields:Object.assign({},this.$listingSettings.exclude),keywordSearch:this.initialKeyword,currentPage:this.initialPage,sortBy:this.$listingSettings.default_sort,itemsPerPage:this.$listingSettings.items_per_page||10,sortEnabled:!1===this.$listingSettings.hide_sort,sortOptions:this.$listingSettings.sort_options,keywordSort:this.$listingSettings.keyword_sort,promotedQueryIds:this.$listingSettings.promoted?Object.keys(this.$listingSettings.promoted):[],taxonomyData:[],predefinedFilter:"",filterQuery:"",isLoading:!1,hasLoadedInitialData:!1,isPopState:!1,shouldPushState:!0,promotedResultsLimit:6,totalResultsCount:0,contentTypeData:o,contentTypes:[],promotedSortBy:[this.$listingSettings.default_sort],results:{},promotedResults:{},isSearchPage:document.body.classList.contains("page-node-type-listing-page"),isBreakpointLg:!1,searchResultsCounts:[],queryBuilder:new m(this),dataHandler:new f(this)}},computed:{resultsCount:function(){var t=0;return this.results.meta&&(t=this.results.meta.count),t},pagerOffset:function(){var t=(this.currentPage-1)*this.itemsPerPage;return t},promotedResultsCount:function(){var t=0;return this.promotedResults.data&&(t=this.promotedResults.data.length),t},hasPromotedResults:function(){return this.promotedResults.data&&this.promotedResults.data.length},resultsWithPromoted:function(){return this.hasData&&this.hasPromotedResults&&1===this.currentPage?[].concat(nt(this.promotedResults.data),nt(this.results.data)):this.results.data},included:function(){return this.hasData&&this.hasPromotedResults&&this.promotedResults.included&&1===this.currentPage?this.results.included?[].concat(nt(this.promotedResults.included),nt(this.results.included)):this.promotedResults.included:this.results.included},isMultipleContentTypes:function(){return this.contentTypes.length>1},facets:function(){return this.hasPromotedResults?this.combineResultsFacets():this.results.meta.facets},promotedResultIds:function(){var t=[];return this.hasPromotedResults&&(t=this.promotedResults.data.map((function(t){return t.id}))),t},keywordSortExistsInSortOptions:function(){var t=this;return this.sortOptions.filter((function(e){return e.values.value===t.keywordSort})).length>0},hasData:function(){return Object.keys(this.results).length>0},hasPredefinedFilter:function(){return Array.isArray(this.$listingSettings.filters)?rt(this.$listingSettings.filters)&&this.$listingSettings.filters.length:void 0!==this.$listingSettings.filters},hasFilters:function(){return this.hasPredefinedFilter||Object.keys(this.selectedFacets).length>0},state:function(){return{filterQuery:this.filterQuery,keywordSearch:this.keywordSearch,selectedFacets:this.orderedSelectedFacets,currentPage:this.currentPage,sortBy:this.sortBy}},orderedSelectedFacets:function(){return Object.assign({},this.sortObject(this.selectedFacets))},contentRequestBody:function(){var t;if(t=this.promotedQueryIds.length&&(this.promotedSortBy.includes(this.sortBy)||!1===this.sortEnabled)?this.promotedQuery():this.resultsQuery(),this.isMultipleContentTypes&&!this.taxonomyData.length){var e=this.queryBuilder.buildExtraTaxonomy();return[t].concat(nt(e))}return[t]},countRequestBody:function(){var t=this;return a.map((function(e){return t.resultsCountQuery(e)}))},urlQueryString:function(){var t={},e={},i={},r={};return this.sortBy&&(r={sort:this.sortBy}),this.keywordSearch&&(e={keyword:this.keywordSearch}),this.currentPage>1&&(i={page:this.currentPage}),Object.assign(t,e,this.orderedSelectedFacets,r,i),this.buildQueryString(t)}},watch:{state:{deep:!0,handler:function(){this.dataHandler.getResultsData(this.contentRequestBody)}},sortBy:function(){this.setActiveSort()},keywordSearch:function(){this.$searchMenu&&this.dataHandler.getCountsData(this.countRequestBody)}},mounted:function(){this.setupBreakpoints(),this.setSortBy(),this.hasPredefinedFilter&&this.queryBuilder.buildFilterQuery(this.$listingSettings.filters,!0),this.queryBuilder.buildFilterQuery(this.orderedSelectedFacets),this.setContentTypes(),this.hasFilters||this.dataHandler.getResultsData(this.contentRequestBody),this.$searchMenu&&this.dataHandler.getCountsData(this.countRequestBody),this.setActiveSort(),window.addEventListener("popstate",this.popState)},beforeUnmount:function(){window.removeEventListener("popstate",this.popState)},methods:{setSortBy:function(){this.keywordSearch.length&&this.keywordSort.length?this.sortBy=this.keywordSort:this.sortBy=this.initialSortBy||this.$listingSettings.default_sort},promotedQuery:function(){return{id:"promoted",type:"results",url:this.queryBuilder.buildPromotedQuery()}},resultsQuery:function(){return{id:"results",type:"results",url:this.queryBuilder.buildSearchQuery()}},resultsCountQuery:function(t){var e=t.id,i=t.title,r=t.contentTypes;return{id:e,title:i,url:this.queryBuilder.buildResultsCountQuery(r)}},combineResultsFacets:function(){var t=this;return this.promotedResults.meta.facets.map((function(e,i){var r=Object.assign({},t.results.meta.facets[i]),n=u(r.terms),s=e.terms.filter((function(t){return t.values.active})),o=n.map((function(t){return t.values.value})),a=e.terms.filter((function(t){return!1===o.includes(t.values.value)}));return n.forEach((function(t,e){s.find((function(e){return t.values.value===e.values.value}))&&(n[e].values.active=!0)})),n.push.apply(n,u(a)),r.terms=n,r}))},resetCurrentPage:function(){this.currentPage=1},onPaginationChange:function(t){this.currentPage=t},resetKeyword:function(){this.updateKeyword("")},resetFilters:function(){this.filterQuery=this.predefinedFilter,this.resetKeyword(),this.selectedFacets={},this.resetCurrentPage()},resetPromotedResults:function(){!1===this.promotedSortBy.includes(this.sortBy)&&(this.promotedResults={})},setTotalResultsCount:function(){this.totalResultsCount=this.resultsCount+this.promotedResultsCount},setContentTypes:function(){var t=this.$listingSettings.filters.type_prefilter;t&&(this.contentTypes=t.map((function(t){return t.target_id})))},updateKeyword:function(t){this.keywordSearch=t,this.setSortBy(),this.resetCurrentPage(),this.resetPromotedResults()},addFacet:function(t,e){t in this.selectedFacets?this.selectedFacets[t].push(e):this.$set(this.selectedFacets,[t],[e])},removeFacet:function(t,e){if(1===this.selectedFacets[t].length)this.$delete(this.selectedFacets,[t]);else{var i=this.selectedFacets[t].filter((function(t){return![t.target_id].includes(e.target_id)}));this.$set(this.selectedFacets,[t],i)}},toggleFacet:function(t,e){var i=t in this.selectedFacets&&void 0!==this.selectedFacets[t].find((function(t){return t.target_id===e})),r={target_id:e};i?this.removeFacet(t,r):this.addFacet(t,r),this.queryBuilder.buildFilterQuery(this.selectedFacets),this.resetCurrentPage()},onUpdateFilters:function(t,e){this.toggleFacet(t,e)},onUpdateSort:function(t){this.sortBy=t,this.resetPromotedResults()},setActiveSort:function(){var t=this;this.sortOptions.forEach((function(e,i){var r=e.values.value===t.sortBy;t.sortOptions[i].values.active=r}))},sortObject:function(t){return Object.keys(t).sort().reduce((function(e,i){return Array.isArray(t[i])?e[i]=nt(t[i]).sort((function(t,e){return t.target_id-e.target_id})):e[i]=t[i],e}),{})},buildQueryString:function(t){return Object.keys(t).map((function(e){return Array.isArray(t[e])?t[e].map((function(t){return"".concat(e,"=").concat(t.target_id)})).join("&"):"".concat(e,"=").concat(t[e])})).join("&")},pushState:function(){this.shouldPushState&&(this.urlQueryString?window.history.pushState({},"","".concat(window.location.pathname,"?").concat(this.urlQueryString)):window.history.pushState({},"","".concat(window.location.pathname))),this.shouldPushState=!0},popState:function(){var t=this.parseQueryString();this.isPopState=!0,this.shouldPushState=!1,this.selectedFacets=this.getSelectedFacets(t),this.keywordSearch=this.getKeyword(t),this.currentPage=this.getPage(t),this.queryBuilder.buildFilterQuery(this.orderedSelectedFacets)},scrollToTop:function(){this.$emit("scroll-to-top")},setupBreakpoints:function(){var t=this;s.a.check({breakpoint:">=lg",match:function(){t.isBreakpointLg=!0},unmatch:function(){t.isBreakpointLg=!1}})}}},at=Object(g.a)(ot,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-listings__results-container",class:{"is-active":t.isLoading}},[t.filtersEnabled?i("div",[t.hasData?i("Filters",{attrs:{facets:t.facets,"available-filters":t.availableFilters,state:t.state,"search-results-counts":t.searchResultsCounts,"sort-options":t.sortOptions,"sort-enabled":t.sortEnabled,"is-breakpoint-lg":t.isBreakpointLg},on:{"update:filters":t.onUpdateFilters,"update:keyword":t.updateKeyword,"update:sort":t.onUpdateSort,"reset:keyword":t.resetKeyword,"reset:filters":t.resetFilters}}):t._e()],1):t._e(),t._v(" "),i("Results",{attrs:{"has-loaded-initial-data":t.hasLoadedInitialData,"has-data":t.hasData,results:t.resultsWithPromoted,"promoted-result-ids":t.promotedResultIds,"taxonomy-data":t.taxonomyData,included:t.included,"items-per-page":t.itemsPerPage,"results-count":t.totalResultsCount,"pager-offset":t.pagerOffset,state:t.state,"is-loading":t.isLoading,"listing-type":t.listingType,"promoted-results-limit":t.promotedResultsLimit,"is-multiple-content-types":t.isMultipleContentTypes},on:{"update:pagination":t.onPaginationChange,"reset:filters":t.resetFilters}})],1)}),[],!1,null,null,null).exports,lt={props:{title:{type:String,required:!0},titleId:{type:String,required:!0}}},ut={name:"App",components:{FilterResultsContainer:at,Header:Object(g.a)(lt,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.title?i("div",{staticClass:"container"},[i("div",{staticClass:"flex items-center mb-6"},[t.title?i("h2",{staticClass:"mb-0 text-4xl [ md:text-5xl ] [ lg:text-6xl ]",attrs:{id:t.titleId}},[t._v("\n      "+t._s(t.title)+"\n    ")]):t._e()])]):t._e()}),[],!1,null,null,null).exports},mixins:[it],props:{title:{type:String,required:!0},titleId:{type:String,required:!0},isFirstSlice:{type:Boolean,required:!0},listingType:{type:String,required:!0}},computed:{flushFirstSliceMargin:function(){return!this.filtersEnabled||!this.isFirstSlice||0!==this.title.length},queryStringData:function(){return this.parseQueryString()},initialSelectedFacets:function(){return this.getSelectedFacets(this.queryStringData)},initialKeyword:function(){return this.getKeyword(this.queryStringData)},initialPage:function(){return this.getPage(this.queryStringData)},initialSortBy:function(){return this.getSortBy(this.queryStringData)},filtersEnabled:function(){var t=!Array.isArray(this.$listingSettings.facets)&&Object.keys(this.$listingSettings.facets).length>0;return 0==this.$listingSettings.hide_all&&(t||1==this.$listingSettings.keyword)}},methods:{scrollToTop:function(){this.$refs["app-container"].scrollIntoView({behavior:"smooth"}),Object(n.a)(this.$refs["app-container"]).focus({preventScroll:!0})}}},dt=Object(g.a)(ut,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"app-container",staticClass:"c-listings | relative",class:{"-mt-20":!t.flushFirstSliceMargin}},[i("Header",{attrs:{title:t.title,"title-id":t.titleId}}),t._v(" "),i("FilterResultsContainer",{attrs:{"initial-keyword":t.initialKeyword,"initial-selected-facets":t.initialSelectedFacets,"initial-page":t.initialPage,"initial-sort-by":t.initialSortBy,"filters-enabled":t.filtersEnabled,"listing-type":t.listingType},on:{"scroll-to-top":t.scrollToTop}})],1)}),[],!1,null,null,null).exports,ct=document.querySelector("[data-js-filtered-listing]"),pt=void 0!==ct.dataset.jsSliceFirst;if(ct){var ft=ct.dataset.jsListingTitle,ht=ct.dataset.jsListingTitleId,mt=ct.dataset.jsListingType;r.a.prototype.$Drupal=Drupal,r.a.prototype.$searchMenu=window.drupalSettings.search_menu,r.a.prototype.$listingSettings=window.drupalSettings["".concat(mt,"_listing")],new r.a({el:ct,render:function(t){return t(dt,{props:{title:ft,titleId:ht,isFirstSlice:pt,listingType:mt}})}})}}}]);